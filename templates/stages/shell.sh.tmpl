{{define "shell"}}
{{range .ConfigFiles}}
if [ -f "configs/{{.Source}}" ]; then
    log "Restoring {{.Source}}"
    mkdir -p "$(dirname "$HOME/{{.Source}}")"
    cp "configs/{{.Source}}" "$HOME/{{.Source}}"
fi
{{end}}

{{if .DefaultShell}}
log "Setting default shell to {{.DefaultShell}}"
if [ "$SHELL" != "{{.DefaultShell}}" ]; then
    chsh -s "{{.DefaultShell}}" || log "Warning: Could not change default shell"
fi
{{end}}
{{end}}
