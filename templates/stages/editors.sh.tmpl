{{define "vscode"}}
{{range .Extensions}}
log "Installing VSCode extension {{.}}"
code --install-extension "{{.}}" || true
{{end}}

{{range .ConfigFiles}}
if [ -f "{{.BundlePath}}" ]; then
    log "Restoring VSCode config {{.Source}}"
    mkdir -p "$(dirname "$HOME/{{.Source}}")"
    cp "{{.BundlePath}}" "$HOME/{{.Source}}"
fi
{{end}}
{{end}}

{{define "cursor"}}
{{range .Extensions}}
log "Installing Cursor extension {{.}}"
cursor --install-extension "{{.}}" || true
{{end}}

{{range .ConfigFiles}}
if [ -f "{{.BundlePath}}" ]; then
    log "Restoring Cursor config {{.Source}}"
    mkdir -p "$(dirname "$HOME/{{.Source}}")"
    cp "{{.BundlePath}}" "$HOME/{{.Source}}"
fi
{{end}}
{{end}}
